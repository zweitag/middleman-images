language: ruby

cache: bundler
before_script:
  - gem install bundler:1.17.3
  - bundle update
rvm:
  - 2.7
  - 2.6
  - 2.5

gemfile:
  - Gemfile
  - gemfiles/Gemfile.middleman-5.0-rc
  - gemfiles/Gemfile.middleman-4.3
  - gemfiles/Gemfile.middleman-4.2
  - gemfiles/Gemfile.middleman-4.1

jobs:
  fast_finish: true
  allow_failures:
    - gemfile: gemfiles/Gemfile.middleman-5.0-rc

script: bundle exec rake test
